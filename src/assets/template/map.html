<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDzZirIqW4AuY1IaT6whvB2hLzlhorayJY&callback=initMap&libraries=&v=weekly"></script>
    <script>
        function initMap() {
            // Create the location of Rome
            const rome = {lat: 41.902782, lng: 12.496366};
            let map;


            try {
                // Create the Map, centered at Rome
                map = new google.maps.Map(document.getElementById("map"), {
                    mapId: 'ec696390e2f16895',
                    center: rome,
                    zoom: 5,
                    disableDefaultUI: true,
                    minZoom: 2,
                });

                // Request and Insert the Info from Aqicn in the Map
                const waqiMapOverlay = new google.maps.ImageMapType({
                    getTileUrl: function (coord, zoom) {
                        return 'https://tiles.aqicn.org/tiles/usepa-aqi/' + zoom + "/" + coord.x + "/" + coord.y + ".png?token=" + process.env.API_KEY + "";
                    },
                    name: "Air Quality",
                });
                map.overlayMapTypes.push(waqiMapOverlay);
            } catch (e) {}

            try{
                let worldButton = document.getElementById("world");
                let worldPos = new google.maps.LatLng(0, 0); //Makes a latlng
                worldButton.addEventListener('click',()=>{map.panTo(worldPos); map.setZoom(2);});

                let nAmericaButton = document.getElementById("northAmerica");
                let nAmericaPos = new google.maps.LatLng(40.480, -103.819);
                nAmericaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(nAmericaPos)){
                        map.panTo(nAmericaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(nAmericaPos);
                            map.setZoom(4);
                        },400);
                    }
                });

                let sAmericaButton = document.getElementById("southAmerica");
                let sAmericaPos = new google.maps.LatLng(-16.346, -59.820);
                sAmericaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(sAmericaPos)){
                        map.panTo(sAmericaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(sAmericaPos);
                            map.setZoom(4);
                        },400);
                    }
                });

                let europaButton = document.getElementById("europa");
                let europaPos = new google.maps.LatLng(48.263, 7.969);
                europaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(europaPos)){
                        map.panTo(europaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(europaPos);
                            map.setZoom(4);
                        },400);
                    }
                });

                let africaButton = document.getElementById("africa");
                let africaPos = new google.maps.LatLng(5.067, 15.971);
                africaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(africaPos)){
                        map.panTo(africaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(africaPos);
                            map.setZoom(4);
                        },400);
                    }
                });

                let middleEastButton = document.getElementById("middleEast");
                let middleEastPos = new google.maps.LatLng(32.084, 52.241);
                middleEastButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(middleEastPos)){
                        map.panTo(middleEastPos);
                        map.setZoom(5);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(middleEastPos);
                            map.setZoom(5);
                        },400);
                    }
                });

                let asiaButton = document.getElementById("asia");
                let asiaPos = new google.maps.LatLng(29.103, 96.184);
                asiaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(asiaPos)){
                        map.panTo(asiaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(asiaPos);
                            map.setZoom(4);
                        },400);
                    }
                });

                let indiaButton = document.getElementById("india");
                let indiaPos = new google.maps.LatLng(21.115, 78.826);
                indiaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(indiaPos)){
                        map.panTo(indiaPos);
                        map.setZoom(6);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(indiaPos);
                            map.setZoom(6);
                        },400);
                    }
                });

                let cinaButton = document.getElementById("cina");
                let cinaPos = new google.maps.LatLng(34.739, 100.183);
                cinaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(cinaPos)){
                        map.panTo(cinaPos);
                        map.setZoom(5);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(cinaPos);
                            map.setZoom(5);
                        },400);
                    }
                });

                let australiaButton = document.getElementById("australia");
                let australiaPos = new google.maps.LatLng(-25.549, 132.947);
                australiaButton.addEventListener('click',()=>{
                    if(map.getCenter().equals(worldPos)||map.getCenter().equals(australiaPos)){
                        map.panTo(australiaPos);
                        map.setZoom(4);
                    }else{
                        map.setZoom(2);
                        setTimeout(()=>{
                            map.panTo(australiaPos);
                            map.setZoom(4);
                        },400);
                    }
                });
            }catch{
                //IT'S FINE
            }
        }

        window.addEventListener('DOMContentLoaded',main_in_page);

        function main_in_page() {
            initMap();
        }

    </script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, maximum-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- Bootstrap Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

    <title>Map</title>
</head>
<body>
    <div class="div-head text-center">
        <h1 class="title dark-font"><strong><a class="link-dark" style="text-decoration: none;" href="home.html">Air Quality Index</a></strong></h1>
    </div>



    <div class="page-wrapper page-map">
        <div class="div-bg bg-map">
            <div class="ui-div ui-div-map dark-font">
                <div class="navigation-details">
                    <a href="home.html" style="text-decoration: none"><img id="back_img_map" alt="Back" title="Back"></a>
                </div>
                <div class="info-txt" style="width: 100%;">
                    <h2 style="position: relative; z-index: 0; margin-top: 10px;">Station in the World</h2>
                    <hr style="width: 80%;">

                    <div class="d-flex justify-content-start container-fluid city-list" style="padding: 0;">
                        <nav class="navbar navbar-expand-xl navbar-light dark-font" style="width: 99%; border-radius: 10px;">
                            <div class="container-fluid">
                                <button class="navbar-toggler toogler-btn" type="button" data-toggle="collapse" data-target="#collapseNavbar" data-bs-auto-close="true" aria-controls="collapseNavbar" aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="collapseNavbar">
                                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex justify-content-evenly" style="width: 100%">
                                        <li class="nav-item">
                                            <button id="world" class="btn bg-transparent">World</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="northAmerica" class="btn bg-transparent">North America</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="southAmerica" class="btn bg-transparent">South America</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="europa" class="btn bg-transparent">Europa</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="africa" class="btn bg-transparent">Africa</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="middleEast" class="btn bg-transparent">Middle East</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="asia" class="btn bg-transparent">Asia</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="india" class="btn bg-transparent">India</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="cina" class="btn bg-transparent">Cina</button>
                                        </li>
                                        <li class="nav-item">
                                            <button id="australia" class="btn bg-transparent">Australia</button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </nav>
                    </div>

                    <div id="map"></div>
                </div>
            </div>
        </div>
    </div>


    <!--- Footer -->
    <footer class="text-center" style="clear: column;">
        <div class="nav">
            <ul>
                <li class="nav-item active">
                    <a id="home-link" class="nav-link" href="home.html">Home</a>
                </li>
                <li class="nav-item">
                    <a id="search-link" class="nav-link active" href="#">Search</a>
                </li>
                <li class="nav-item">
                    <a id="map-link" class="nav-link" href="map.html">Map</a>
                </li>
            </ul>
        </div>

        <div class="social">
            <h5><strong>in</strong></h5>
            <a href="https://github.com/Nando784" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://www.linkedin.com/in/nando-sorbello-290399" target="_blank"><i class="fab fa-linkedin"></i></a>
        </div>

        <!--Copyright-->
        <p class="copy">&copy; 2021 NANDO SORBELLO</p>
    </footer>


</body>
</html>